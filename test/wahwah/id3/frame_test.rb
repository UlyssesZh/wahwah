# frozen_string_literal: true

require 'test_helper'

class WahWah::ID3::FrameTest < Minitest::Test
  def test_v2_2_frame
    content = StringIO.new("TT2\x00\x00\x11\x00China Girl\x00".b)
    frame = WahWah::ID3::Frame.new(content, 2)

    assert frame.valid?
    assert !frame.compressed?
    assert !frame.data_length_indicator?
    assert_equal :title, frame.name
    assert_equal 'China Girl', frame.value
  end

  def test_v2_3_frame
    content = StringIO.new("TIT2\x00\x00\x00\x17\x00\x00\x01\xFF\xFEC\x00h\x00i\x00n\x00a\x00 \x00G\x00i\x00r\x00l\x00".b)
    frame = WahWah::ID3::Frame.new(content, 3)

    assert frame.valid?
    assert !frame.compressed?
    assert !frame.data_length_indicator?
    assert_equal :title, frame.name
    assert_equal 'China Girl', frame.value
  end

  def test_v2_4_frame
    content = StringIO.new("TIT2\x00\x00\x00\x17\x00\x00\x01\xFF\xFEC\x00h\x00i\x00n\x00a\x00 \x00G\x00i\x00r\x00l\x00".b)
    frame = WahWah::ID3::Frame.new(content, 4)

    assert frame.valid?
    assert !frame.compressed?
    assert !frame.data_length_indicator?
    assert_equal :title, frame.name
    assert_equal 'China Girl', frame.value
  end

  def test_invalid_frame
    content = StringIO.new("tit2\x00\x00\x00\x17\x00\x00\x01\xFF\xFEC\x00h\x00i\x00n\x00a\x00 \x00G\x00i\x00r\x00l\x00".b)
    frame = WahWah::ID3::Frame.new(content, 4)

    assert !frame.valid?
  end

  def test_data_length_indicator_frame
    content = StringIO.new("TIT2\x00\x00\x00\n\x00\x01\x00\x00\x00\x06\x03title\x00".b)
    frame = WahWah::ID3::Frame.new(content, 4)

    assert frame.valid?
    assert !frame.compressed?
    assert frame.data_length_indicator?
    assert_equal :title, frame.name
    assert_equal 'title', frame.value
  end

  def test_compressed_frame
    content = StringIO.new("APIC\x00\x00\x10]\x00\x80\x00\x00\x00\x9Bx\x9C\xED\x9D\xFB[\x13W\x1A\xC7\xED\x7F\xB1\x7F\xC2\xFE\xB6?m\xBB\xDD\xC7\xEE\xB3\xB5\xD6\xD6\xF5^\xBBZ\xEF\xCA\x03\xAB\x16\x15\x05[*\xA2 \xD8*\x88\xD8\x05]\x84\xC8EAn\"\xF7 \x97\xA0\\D.Q\x90{\x80*\x01\x14\x14\x94[\n\x15\xABf\xBF\xE4h\x9A\x92\xC9\x10\x12Jf\xE6\xBC\xDFg\x92g\x9E\xC9\x99\x93\x99\xF39\xEF\xE5L\xCEL\x16\xED\xDD\xBFk\xB7\xC7_\xDC\xF6\x1F\\\xB4h\xD1\x92U\xE1\xEB\xDE[4\xAD\xF7\xF1\xFA3^ix\xA5\xE3\xF5\xDE\xA2?\x99\xB6\x7F\xF5\xF6sK]\xFC\xAB\x17-|.\xD3\xEC_\xBDyC\vo\v\xB1\xE7w!\xF6\xFC.\xC4\x9E\xDF\x85\xD8+v1ZiF\x01b/\x9B\xC5\x9A\xE5\\5\xA3Bb/W\x90\xC4^*\x8BKX\xCEU\xC4^! \x1D\x10w\xEC]\xDD\xE0\x12\x92\xEC\xD9\xBB\xBA\x01\xE5*\xEB\x96t1{W7\bG\xFA\xC3\xD9\xBB\xFA\x04I657\xF6\xAE>Z\xD2|\xCA^\xF6\xAE>N\xD2\xFC\x8B\xD8\xF3+b\xCF\xAF\x88=\xBF\"\xF6\xFCj\xE1\xD8kL\xEA\xEA\xEAr\xA6\x86\xE1\xE1a\xE7\x8Fd\xC1*\xEF\xEF\xEFw\xF2\x94m\xC9\xF9\xC64.$\xFB\xC4\xC4\xC4\xD6\xD6V\x83\xC1\xE0L\rhM\xE7\x8Fd\xC1*\xC7\xC9\xEA\xF5\xFA\xB4\xB4\xB4y\xAF\x19\x15\xAA\xD5j\xB4\xA73\x95,({'\x9B@v\xEC\x99jL\x9A\xF7ja\xF7\xB2go\xB9\xDD\xD6\xBAy\v\x1A1\xCD\xA4\xFA\xFAz\xC1o\x99\x9A\x9A\xC2G(\x80\xC2\x15\x15\x15\xF6\xBB\x99Y+\x17<~x\xDD\xAC\xAC,|\x84w\xEC\x85\x15\xEBo\xC4a\xA0N\x1C\x98\xE0\xF7\x9A\x8F\x16vl\x1DtDz$w\xEC\xD1@\x06\x93\xD0\xD6\x82g\x0E~(3e\x12[\xB7\xFF\xF0\xC4+\x17<~`c%\xB1\x17vG\x99\x19\x05p\x18\x89&\t\xC6f\xEC\x8B\xEFb\xDD\x05\xEB\xD6]\x84\xD8\xFFV\xD2\xDC\x82\xCC\xE0\xACk\xC3Fs\x19\xD6\xEE3*\xE9\x7F\xA7\x19F6k\xE5\xE2\xEC!\x84vk\xF6\xA8\ne\xD0\va\xFD\xE2Gk4u {\xBE\x94\x89;\xF6\xE6-X\xB1n\xE8\x19BS\xA2\xCC\f\xC6\x9Aw\x9A\xE1\xD8g\xAD\\\xF0\xF8Q9\xF3\xF9\xA8\x10t\xAD\xF7\x823\x00xV\xA1\xB5\xDBg\xCEFc!\xEB\x1EI\xEC\xDFn\x81m\xB1u\x96?\xDB\xFA.\xEC\x88va\xEDn\xFF\xE1\x89W.\x82\x01P\xF1\x11\x8B\xF7\x96\xDBY\xE7c{\t\xC6\x11\xE66\xCC\xAE\xC8\xBA\xA7*\x9F=#\xC4Z\xCA\x1C>\x05\e\x02'\xCC\xD6ad\"\\\xF1E,\xD8\xDB?d\x9F\xB5r\xC1\xE3\ao\xF3^\xF0\xDE3\xD8\xB3pn.i\x9D|X\xC6\x02\xCB\xC2\x96_j+\xABU\x0E{\xB4\v\xCE\x9CY*\xDEa\x10\xD6-\xC5Jf\xBD\x93`\x0E\x8F\x8Df\xD7j+\xCA\xDA:<\xF1\xCAE|>\xF3\xDB\xD6\x9C,\x87\xE0(i=\n\xC0\xA1\x9AO\x1C\xA7,\x98\xE7\xB3\xCA\xAD\xBB\x85\x12\xD83\xA1Q\xCC\x9FZ\xAE\x8B\x97\xB4\x96\xA5k\x05\t\xFB\xD9\xCFZ\xB9\xC8\xF1\x83\x19>r\xF8\xB2\x15\xDB]\xA4\x80`\xE52c\xCF\xB2\x1E\xE7\xAB\x12\x11K\xB6A\x9D\r\xD6\xE7\xF12\xED\x1Fzei\xAEb\x01B6\xEC[MZ\x80\xE6\x83\x89\xB0\xEFr\xE6\xFA\xB1\xB5\xE6\xBDBg4/\x8D\xB9p\xECIR\x13\xB1\xE7W\xC4\x9E_\x11{~E\xEC\xF9\x15\xB1\xE7W\xC4\x9ESY\x83'\xF6\xBC\x88\xD8\xF3+b\xCF\xAF\x88=\xBF\"\xF6\xFC\x8A\xD8\xF3+b\xCF\xAF\x88=\xBF\"\xF6\xFC\x8A\xD8\xF3+b\xCF\xAF\x88=\xBF\x9A\x03{\xC2\xAF0\x11{~E\xEC\xF9\x95\xF2\xD9\xBF1\xE9\xF5\xEB\xD7\xAF^\xBD\xFA\xF5\xD7__\xBE|955\xF5\xE2\xC5\v\xBCc\x1D[\xB0\x1D\x9F\xB2b\xAE>\xD8\x05\x95\x92\xD93\x9C@\v\xCC\x93\x93\x93\xE3\xE3\xE3###\xCF\x9E=\e\x1A\x1A\x1A\x1C\x1C\xC4;\xD6\xB1\x05\xDB'&&\xD0\e\xD0\x0F\xB8\xEA\x04\x8Ae\xCFl\x1D\x96\r\xAE\x00\xFC\xF4\xE9\xD3\xBE\xBE\xBE\a\x0F\x1E\xE8t\xBA\xD6\xD6\xD6\x96\x96\x16\xBC\xB7\xB7\xB7wuu\xE9\xF5\xFA\xFE\xFE~t\x85\xB1\xB11\x14FGAw\xE1\xA1\a(\x93=\x03\x0F\x8A\x06\x83\x01&\x0E\xBA \xAD\xD5j+**4\x1AMaa\xE1\x8D\e7\xF0^RRRVVV]]]__\x8F~\x80bO\x9E<AGA\x0F@\xA7a>\xC0\xD5\xA7\xF2\aJ\x99\xEC\x19x8s\xB0\xEC\xEC\xEC\xAC\xAB\xAB+..\xCE\xC8\xC8HHH\xB8x\xF1bdddDD\x04\xDE\xA3\xA2\xA2bcc\x93\x93\x93\xB3\xB3\xB3\xD1\x0F\xD0\t\x9A\x9B\x9B\xBB\xBB\xBB\xE1$\xB0/\x8B\x02\n\xC6\xAF@\xF6\xA0\x05f\xB0] \xEC\xE8\xE8\xA8\xAA\xAA\x02Z\x95Ju\xE6\xCC\x99\x80\x80\x00__\xDF\xC3\x87\x0F{{{\xFB\xF8\xF8`\xDD\xDF\xDF?88\xF8\xEC\xD9\xB3\xD1\xD1\xD1)))\xF0\a\xE8\x01mmm\b\x10\xC3\xC3\xC3\xC8\x12\x14\x8C_\x99\xECa\xB2 \x87\xE8\x0E\x90\x99\x99\x99\x17.\\\b\f\f\xF4\xF2\xF2\xF2\xF0\xF0\xD8\xBE}\xFB\x96-[6o\xDE\x8C\xF7m\xDB\xB6\xB9\xB9\xB9\xED\xD9\xB3\xE7\xE0\xC1\x83~~~\xA7N\x9D\x82WHOOG\\hhh@\b@2\x88>\xA4T\xFC\nd\x8FL\r\xC0\x90\xBE566\x16\x14\x14\x00\xE7\xF1\xE3\xC7\xF7\xEE\xDD\xBBi\xD3\xA6u\xEB\xD6\xADZ\xB5\xEA_\xEF\xB4r\xE5\xCA5k\xD6\xAC_\xBF\x1E\x1F\xED\xDA\xB5\xCB\xD3\xD3\x13= ,,\f\xA1\x01;\"?@\xEF\x01~\xA5Z\xBF\x02\xD9\x83\x132vX-\x8C\x1En<$\xF8\x87\xE3\e\x0F\x04\x7F\xBC'\xFCo_\x9B\xFF\xE6\xFB\xD4\a\xFF9\xFA\xE1\xCE\xBD\x8B7\xAEY\xB2|\xD9\xB2e\xE8\a\xE8\x04\e6l\x80\e8t\xE8\xD0\xC9\x93'\x11#\xF2\xF2\xF2\x80\x1F\xE1\x1F.\xE4\x97_~a\xC9\xBF\xABOn>\xA5@\xF6H\xD1A\v)\xDE\xAD[\xB7T~g\xFF\xF7\xF7\x83\x17E\xFF\xEE\x1D\xFD\xC0\xFD\xA3/\x97.]\xBA|\xF9\xF2\xB5k\xD7n\xDD\xBAu\xDF\xBE}AAA\xC0\xAFV\xAB1\x04@\xECGgB\xF2H\xEC\xA5.@\x82\xA3\xC6\x98\xED\xFA\x0F\xB1\xE2\xD4-\x97\xB3\x1F\xEC\xDD\xF1\x8F/>\xFB\xEC3\x04\x05\x84\x00\xE0G\x0E\x18\x1F\x1F\x8F\xFC\xBF\xA5\xA5\x05\xE3\x05\xC4\x11\x85\x99\xBEb\xD9\xDF\xC9(\xB1\x1F\xBCyA X\xF1\xE9r\xE0\x87\xF5#\x01\xC4\xD0 55\xF5\xCE\x9D;\x0F\x1F>\xC4\xB8_a\xA6\xAF@\xF6\xF0\xF9\xCF\x9F?\xCF\xF5\x8Dv\x80=\v\x01\xC0\x0F\xE7\x8F\xD8\x8F\xD4\x0F\xA9\"\x06~0}\x8C\x18\x91\xF4\xBD~\xFD\xDA\xD5\xE77?\x12\x04/{\xF6\xC8\xF5FGG/\xAF8\xE6\x18{\x86\x7F\xF5\xE7+6n\xDC\xB8\x7F\xFF\xFE\x90\x90\x10\x8C\xFA\xEA\xEA\xEAz{{\xC7\xC7\xC7\xE1\xF6]}~\xF3#e\xB2\a\x1E\x83\xC1\xE00x\xB6\x04}\xE8\x0E\xD3www\x0F\b\b\xC0\x90\xAF\xA2\xA2\x02\xE3=\xB8}t,W\x9F\xDF\xFCH\x99\xEC\x11\x921$s\x92=\x16\xAF%\xDB\xB6o\xDF\xEE\xEB\xEB\v\xB7\xAF\xD1ht:\x1D\xD2\b\x04\x14W\x9F\xDF\xFCH\xB1\xECA(qU\xA0\x93\xEC#\xDF\xDF\xBFc\xD3V\x1F\x1F\x9F\x88\x88\b\x84\xFC\xD6\xD6\xD6\xA1\xA1\xA1\x17/^\xB8\xFA\xFC\xE6G\x8Ae\x0F\xB7_\x1At\xD5y\xD3\xF7^\xE1\x86l\xFF\xDC\xB9s\x18\xE8777#\xDD#\xF6R\x17\xF07gT:\xCF>\xF8\xE3\xDD^^^\xE1\xE1\xE1\xF9\xF9\xF9MMM\xC4^\x06b\xBF\xDF'\xAD>\xE1$\xFB\xB0\xC5\x9E\x87\x0E\x1D\x82\xDD\xCF\xCA^vs=\x14\xCB\xDEh\x82\xD1U|\xCFy\xD3G\xAE\x87x_PP\x00\x9F\xFF\xE4\xC9\x93\x19\xEC\xDF\xBC\x13\x9B\x0F\xF8\xDA$Y\xF4\x03%\xB37\x9A\xC0\x94\x9DLq\x92}`` \xF2\xFC\xA2\xA2\"ve\xD7\x9A=\x9B\x02\xCA\xE6\x7FBl\xFE\xA7\xF4\xE7\xFC(\x9C\xBD\xD1\xC4\xE6\xDA\x96P\xA7\xDC\xBE\xE9'\xDD\xD2\xD2R\xE4\xF9\xD6\xEC\xC1\x18\xA41\xA4\xFC\xF9\xE7\x9F\xC7M2O\xFB$\xF6\xAE\xD7\x8B\xB1\x89<\xCF\v\x0E\xB3W\xA9Tiii\x15\x15\x15\xED\xED\xED\xD6\xECa\xF4\xD8b0\x18\x86\x87\x87\x9F\x9A\xF4\xFC\xF9s\xF4\x00\xE9\xFF\xE6\xCB\x05{\xA3\xC9\xFA\xAB#r\x1Cc\x9F\x92\x92\x92\x9D\x9D]UUe\x8B\xFD\xE4\xE4\xE4\xC8\xC8\xC8\xC0\xC0\x80^\xAF\xEF\xEE\xEE\xEE\xEB\xEB\e\x1C\x1C\x04~\x89\xFF\xF0\xC3\v{\xA3\t\x7F_\x8D\xCE\x01\xFF\x0F\xF0\xECo\\t:\x9D {8y\xD8:\x90wvv\xB6\xB5\xB5\xE1\xBD\xB7\xB7W\xFA\x93\xBD8b\xCF\x04\x12m\x99U\xF6\x84\x80\eA\x97\xD9\n2|$z\xB5\xB5\xB5\x1D\x1D\x1D\x82\xF1\x1E\xEE\x1D\xEC\xC1\e\x8E\xE1\xFE\xFD\xFB\x8D\x8D\x8D(\xF9\xE8\xD1#8\x03\x14&\xF6\x92\xD3\xD8\xE3g\rW4\xC5\xDF\xC5]]\xF3\xDB5\x80\xA4\xD5'r\xBF>\x7F7\xBE\xF8IW\xEF\xE3\xC7\x8F\xD9F\x80/..\xAE\xAB\xAB\x13d\x0F\xB4\xE3\xCFFt\xA5\xF7`\xF70\xFA{\xF7\xEEi\xB5Z\xE0\x7F\xF0\xE0\x01b?\x12@\xC9\x9A>\xBF\xEC\xC5\x05\xC0\xC0\xCC\xD8\x17\x9B$\xC2~bd\x1C\xC5\xEE^\xBB\x89\x02`_]]\x8D\xC2\x18\x14\xC0\x13H\xD9\xF4\x89\xBD\xB0\xECgo4\xB9\xFD\x9BAW\x13W\x05\xC0\xD6\xE1\xF3\xEF\xDC\xB9\x83\xC4\xB0\xBE\xBE\xBE\xAB\xAB\v\xA6/\xD9\x99^\xC4^Xsb\x0F\xAE\x03-\xDD(Y\x1E\x99\xD9\xD2\xD2\xC2\xFE\x91\x0F\xD6\x8Fuf\xFA\xD2L\xF8\x89\xBD\xB0\xE6\xCA\x1E\x96\x9D\xB372\xF6c\xDF\xD6\x86&v\xD7\x1F\x04\xFFo6}\t\xCE\xF4\"\xF6\xC2\x9A\x13{\xA3\t\xBF\xEEF\x1D\n\xDF\xFC\xF1ZCCCee\xE5\xAD[\xB7\xE0\xFCa\xFAl~\xB7\x043>b/,\a\xD8\x83n\xD2\xAA@\x98\xFE\xFD\xBAz\xC4\xFB\xD2\xD2\xD2\xF2\xF2rD}vg\x8F\x043>b/\xAC\xB9\xB27\x9A2\xBE\xBA\xD8B\x94/\tO\xAD\xAD\xAD\x05{\x8DF\x83\xA8\x8FA\x7F\x7F\x7F?\x06{R\x9B\xE4I\xEC\x85\xE5\x00{6\xD0G\xF9\xCB+\x8E!\xD2\xC3\xE7c/D}\x8C\xF5{zzFGG\xA5\xE6\xF6\x89\xBD\xB0\x1C`o4\xCD\r\xD7\x04&N\xEF\x12\x99\x0E\xEAEEE\xB0~\xA4~?\xFD\xF4\x93\x04\xDD>\xB1\x17\x96c\xEC\xE1\xF6[\xF3k\xB0K\xEA\xCEP\x84\xFC\xC2\xC2B\xE0G\xC6\a\xB7?00099I\xECe \xC7\xD8\xB3\xB9\xE1H\xF7\xA6\xC7\xFAj\r\xC0\x17\x14\x14\xC0\x01477#\xDB7\x18\f\x92\x1A\xE9\x11{a9\xCC\x1E\x9F\x16\x1F\x9F\xFE\x11(\xEF\xFB\x04\xB0\xCF\xCF\xCF\xBFy\xF3&\xB2}\xBD^\xCFB\xFEB\x9E\x85\x88l\x81'\xF6\x0E\xB27\x9An\x05\xD4&M\xDF\x03z\xE5\x8B\x13`\x9F\x9B\x9B\x8Bw\xF6\f\x87\xE1\xE1ab/\x039\xCC\x1Et\a\xFB\x06\xDE\xFE\n\x9C\x93\x9F\x9D\x9D\r\xB7_SS\xD3\xD9\xD9\x89tojjj\xC1NA\\\xC4\xDE\xA6\x9Ca?22\xC2n\x03\xBD\x1E\x16\x7F\xFD\xFA\xF5\xBC\xBC<\xE4}:\x9DnppP:s\xFB\x89\xBDM9\xC3\x1E\xBE=\xDD-l:\xDB\xF7\xBB\x90\x9E\x9E\x0E\xD3\xAF\xAC\xACD\xAA/\xA9\xFB:\x88\xBDM9\xCC\x9E=\xF6\xA1 0\x01;\xC6o<\x91\x92\x92\x92\x99\x99\x89T\xBF\xAD\xAD\x8D\xD8\xCBC\xCE\xE4\xF9`\\x&\x19;^Zy4))\tn\x9F\xCD\xF1%\x9F/\x0F9|mgbb\xE2\xD1\xA3G\xEA\xD3W\xD8\xBEW\xAE\\\xC9\xC8\xC8\x00{v\xFF6\xE5z2\x90c\xD7\xF3\xD9\xF3>\x1E>|\x98s2\x9E\xED\x9B\x90\x90\x00\xBB\xBF}\xFB6\xF2|\x1A\xE3\xC9C\x8E\xB1\xC7GCCCp\xEF\xA9\xFB\xCE\xB1}\xE3\xE3\xE3\x91\xEBa\x8C\x87\x0EA\xD7v\xE4!\xC7~\xBF7\x18\f}}}w\xEF\xDEM\xD8\x18d\xB6{\x8C\xF1\xB0Ej\xD7t\x89\xBDM\xCDu\xCE\x16\xA0b;\":\xE2zYY\xD9\xDBI\xDF\x9F\xFB&&&\x16\x15\x15555I\xED\xB7\x1CboSse\xFF\xF2\xE5\xCB\xF1\xF1\xF1\xDE\xDE^\xADV\x9B\x1Er\xE9-\xFB\xB5~\xA9\xA9\xA9\xE5\xE5\xE5\xE6\x8Bz\xC4^\x06\x9A\xD3\xFC|\xF6\xBCv|\xD4\xD2\xD2\xA2\xD1hb\xDD\xBEg;\xC6\xEC;\x85`\x8F\x1D{zz\xD03$5w\x83\xD8\xDB\x94\x9D\xEC\x19x8s\x985\x8C\e\xF9|zR\xCA\xC5\xC5\xDEl\xC7\xB8c?bGi>\x94\x91\xD8\xDB\x94=\xEC\x19xv3\x1E\xD2\xF8\xDA\xDA\xDA\x9C\x9C\x9C\x18\x9F\xDF\xEE\xF5\xBCvu\xFAa\xAC\xEC\xA9|\b\n\xD21z#\xB1\x17\x918{\xF6H\x15f\xF1\x00\xDF\xDD\xDD\x8D0\x9F\x9F\x9F\x1F\x17\xA5\x8A\xFA\xA7\x0F\xDBK\xB5)\x00Y^ss3\xB2<\t\xDE\x9AC\xECmJ\x84=\f\xDD\xFC\xF7[p\xF50k\x80W\xAB\xD5\x18\xCAGx\x04\x98\x8D>\xF9\xFB\x8BlX/\xCD\xFBr\x88\xBDMY\xB3\x87K\xC7\xF8\xAD\xBF\xBF\x1F\xC3t\xE0\x1F\e\e\x83A#\xC6\x030F\xF0qqq\xE1\xFE\xA7\xCC\xE0c>\xF9\xB6\xB4\xB4\x94\xFD~#A\xA37\x12{\x11Y\xB2\x87\xEB.,,\xAC\xAA\xAA\xC20\x1Dv\xCC\x1E\xAC\xA2\xD7\xEB\xE1\xCF+**\xB2\xB2\xB2T*U\xE8\xC9S\x91\x9Fx\x9B\xD9\xA7\x05E\xB3\x7F\\@z/\xB5H\xCFD\xECm\xCA\x92}AA\x01,\e\x837$n\r\r\r\xED\xED\xED\xEC\x86Kt\x88\xE4\xE4\xE4\xF3\xE7\xCF\a\a\a\x87\xAD\xF31\x83W}\xEA\xCBR<\xA4\x02\xA8G\x9A\x0F\xDC\"\xF66e\xC9\x1E\xD9;\x9B\x82\x81\xA0\xCE\xA6\xDC\x83:\xB6\xC4\xC4\xC4\x84\x84\x84\xF8\xFB\xFB\x87\xAE>d\x06\x8FE\xADJg35\xA4\xFC\xCC\x15boS\x96\xEC\x819\xEE\xF7\x8A\x8A\x8A\n\r\r=v\xEC\x98\xB7\xB7\xF7\x0F+\x0EX\x82Or;\x8D\xD0\x80\xB4@\xB2\xDE\x9E\x89\xD8\xDB\x94%\xFB\xCB\x97/\x9F;w\xEE\xF4\xE9\xD3\xF0\xED\x01\x01\x01@\xEE\xEB\xEB{\xE0\xC0\x81\xAF\xDD\xF7\x04\x7F\xEEi\t\xFE\xD2\xB2\xEF\xB4\xB7k\x10\xE6GGG\x91\xDBK\xD3\xDB3\x11{\x9B\xB2d\x0F\xDF\x0E\xEA\xDF|\xF3\x8D\xA7\xA7\xA7\x87\x87\x87\xBB\xBB\xFB\xCE\x9D;w\xFF{g\xD8\xE2\xDF\x81\xC7R\x9EU\x8C\x1C\x90=gE\x82\xB9\xBD\xA5\x88\xBDMY\xB2\x8F\x8C\x8C<r\xE4\xC8\xEE\xDD\xBB7o\xDE\xBC~\xFD\xFA\rk\xBF\xF4]\xB2k\x06\xF5\xE90\x1F~\x95\xDDn-\xFD\xA7*\x1A\x89\xBD\x88,\xD9\xC3\xE1#\xAEo\xDB\xB6m\xF7\xB2M\xDF-\xDE\x11\xF9\xFE>k\xF0\xE9^\xFF\xC5X\x7FhhH\xCA\xF9\x9D\xA5\x88\xBDMY\xB2?\xFF\xD5\xD1\xB3K\xC5\x9E\xC4\x97\xEC~F\xA7\xD3I<\xB1\x9F!boS\x96\xEC\xC5\x97\xF85\xC7\e\xB5\r\x03\x03\x03\x06\x83A\xCA\x89\xBD\xA5D\xC0\x13{{\xD9_Zv\xA4\xBE\xE6\xEE\xE3\xC7\x8F\xCDO\xCF%\xF6\xB2\x97=\xECc>:|;G\xC3Ft\x92\xBD~'(b/&{\xD8\xDF\xCA\xB8\xD1\xDD\xDD\xCDFt2\x02o$\xF6\xE2\x9A\x95}N\xE8e6\vorrR\xFA#\xBA\x19\"\xF6b\x12g\x9Fz\xF4Bcc\#{z\x96\\\x12{K\x11{1\x89\xB0\x8F\xDB\x1A\\]]\ro\xCF.\xDC\xCA\x0E\xBC\x91\xD8\x8B\xCB&\xFB%\x87o\xE4\xE4[N\xBF$\xF6J\x93-\xF6I!\xD10z\xBD^/\xCD\xC7\xA4\xDA)b/&A\xF6\xD1\xDBO\xA8\xD5\xEA\xA6\xA6&|$\xB59\xD7s\x12\xB1\x17\x93 \xFB\xAB\xD1\teee]]]\xC3\xC3\xC3r\xB9\x84'(b/&k\xF61;\x82rss\xEB\xEA\xEAz{{\r\x06\x83\xD4\x1E\x8E;'\x11{1Y\xB3\x87\xD1\x97\x94\x94`h\xC7\xA6i\xCB\xD7\xE8\x8D\xC4^\\\xEC\xD1)f\xF0\xAA\x15~0\xFA\xAA\xAA\xAA\x8E\x8E\x0E\xA9\xDDU\xE9\x80\x88\xBD\x98\xD8S\x14\xCC\xECS\xFC\xCE\x9B\x1F\x8F\xC92|W\x1F\xA0S\"\xF6b\x82e#\xA13\xB3/\xCD.\xD4j\xB5\xEC\xDE\fi\xFE\x01\xCA\x9CD\xEC\xC5\x04\xCB\x1E\x1F\x1F\x7F\xFB\v\xFDr\x7F\x84y\x80\xEF\xEB\xEBcS\xEEe\xED\xF0\x8D\xC4^\\\xEC_n\x19{\xB5_lOO\x0F,\x1E\xE0ez\x01\x7F\x86\x88\xBD\x98\xD8\xA34\x18\xFB\xEA\xE8|PG\x98g\x7Fn.w\x87o$\xF6\xE2b\x7F{\xC6\xD8?\xACl\xC6\xA0\x0E\xD4\xD1\ed\xF7s\xAD\xA0\x88\xFD,zcj\x85\xE9F0\x89\xFDl\xA3\x00\xF0Fb\xCF\xB3\x88=\xBF\"\xF6\xFC\x8A\xD8\xF3+b\xCF\xAF\x88=\xBF\"\xF6\xFC\x8A\xD8s*q\xF0\xC4^\xC9\"\xF6\xFC\x8A\xD8\xF3+b\xCF\xAF\x88=\xBF\"\xF6\xFC\x8A\xD8\xF3+b\xCF\xAF\x88=\xBF\"\xF6\xFC\x8A\xD8\xF3+b\xCF\xAF\x88=\xBFr\x9C=-\x8A_\x88=\xBF\v\xB1\xE7w!\xF6\xFC.\xC4\x9E\xDF\xE5-{Z\xF8\\\x16\xFD\x1F\x1D\xCE\xF7\xD7WOAR".b)
    frame = WahWah::ID3::Frame.new(content, 3)

    assert frame.valid?
    assert frame.compressed?
    assert !frame.data_length_indicator?
    assert_equal :image, frame.name
    assert_equal binary_data('test/files/compressed_cover.bmp'), frame.value[:data].strip
  end
end
