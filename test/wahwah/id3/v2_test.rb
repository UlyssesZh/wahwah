# frozen_string_literal: true

require 'test_helper'

class WahWah::ID3::V2Test < Minitest::Test
  def test_parse
    content = StringIO.new("ID3\x04\x00\x00\x00\x00*^APIC\x00\x00!,\x00\x00\x03image/jpeg\x00\x03\x00\xFF\xD8\xFF\xE0\x00\x10JFIF\x00\x01\x01\x00\x00H\x00H\x00\x00\xFF\xE1\x00\xCAExif\x00\x00MM\x00*\x00\x00\x00\b\x00\a\x01\x12\x00\x03\x00\x00\x00\x01\x00\x01\x00\x00\x01\x1A\x00\x05\x00\x00\x00\x01\x00\x00\x00b\x01\e\x00\x05\x00\x00\x00\x01\x00\x00\x00j\x01(\x00\x03\x00\x00\x00\x01\x00\x02\x00\x00\x011\x00\x02\x00\x00\x00\x11\x00\x00\x00r\x012\x00\x02\x00\x00\x00\x14\x00\x00\x00\x84\x87i\x00\x04\x00\x00\x00\x01\x00\x00\x00\x98\x00\x00\x00\x00\x00\x00\x00H\x00\x00\x00\x01\x00\x00\x00H\x00\x00\x00\x01Pixelmator 3.8.4\x00\x002019:06:10 16:06:29\x00\x00\x03\xA0\x01\x00\x03\x00\x00\x00\x01\x00\x01\x00\x00\xA0\x02\x00\x04\x00\x00\x00\x01\x00\x00\x00\xC8\xA0\x03\x00\x04\x00\x00\x00\x01\x00\x00\x00\xC8\x00\x00\x00\x00\xFF\xE1\t\x92http://ns.adobe.com/xap/1.0/\x00<?xpacket begin=\"\xEF\xBB\xBF\" id=\"W5M0MpCehiHzreSzNTczkc9d\"?> <x:xmpmeta xmlns:x=\"adobe:ns:meta/\" x:xmptk=\"XMP Core 5.4.0\"> <rdf:RDF xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"> <rdf:Description rdf:about=\"\" xmlns:xmp=\"http://ns.adobe.com/xap/1.0/\" xmp:CreatorTool=\"Pixelmator 3.8.4\" xmp:ModifyDate=\"2019-06-10T16:06:29\"/> </rdf:RDF> </x:xmpmeta>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <?xpacket end=\"w\"?>\x00\xFF\xED\x008Photoshop 3.0\x008BIM\x04\x04\x00\x00\x00\x00\x00\x008BIM\x04%\x00\x00\x00\x00\x00\x10\xD4\x1D\x8C\xD9\x8F\x00\xB2\x04\xE9\x80\t\x98\xEC\xF8B~\xFF\xC0\x00\x11\b\x00\xC8\x00\xC8\x03\x01\"\x00\x02\x11\x01\x03\x11\x01\xFF\xC4\x00\x1F\x00\x00\x01\x05\x01\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x03\x04\x05\x06\a\b\t\n\v\xFF\xC4\x00\xB5\x10\x00\x02\x01\x03\x03\x02\x04\x03\x05\x05\x04\x04\x00\x00\x01}\x01\x02\x03\x00\x04\x11\x05\x12!1A\x06\x13Qa\a\"q\x142\x81\x91\xA1\b#B\xB1\xC1\x15R\xD1\xF0$3br\x82\t\n\x16\x17\x18\x19\x1A%&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\x83\x84\x85\x86\x87\x88\x89\x8A\x92\x93\x94\x95\x96\x97\x98\x99\x9A\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xB2\xB3\xB4\xB5\xB6\xB7\xB8\xB9\xBA\xC2\xC3\xC4\xC5\xC6\xC7\xC8\xC9\xCA\xD2\xD3\xD4\xD5\xD6\xD7\xD8\xD9\xDA\xE1\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xF1\xF2\xF3\xF4\xF5\xF6\xF7\xF8\xF9\xFA\xFF\xC4\x00\x1F\x01\x00\x03\x01\x01\x01\x01\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x01\x02\x03\x04\x05\x06\a\b\t\n\v\xFF\xC4\x00\xB5\x11\x00\x02\x01\x02\x04\x04\x03\x04\a\x05\x04\x04\x00\x01\x02w\x00\x01\x02\x03\x11\x04\x05!1\x06\x12AQ\aaq\x13\"2\x81\b\x14B\x91\xA1\xB1\xC1\t#3R\xF0\x15br\xD1\n\x16$4\xE1%\xF1\x17\x18\x19\x1A&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\x82\x83\x84\x85\x86\x87\x88\x89\x8A\x92\x93\x94\x95\x96\x97\x98\x99\x9A\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xB2\xB3\xB4\xB5\xB6\xB7\xB8\xB9\xBA\xC2\xC3\xC4\xC5\xC6\xC7\xC8\xC9\xCA\xD2\xD3\xD4\xD5\xD6\xD7\xD8\xD9\xDA\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xF2\xF3\xF4\xF5\xF6\xF7\xF8\xF9\xFA\xFF\xDB\x00C\x00\x02\x02\x02\x02\x02\x02\x03\x02\x02\x03\x04\x03\x03\x03\x04\x05\x04\x04\x04\x04\x05\a\x05\x05\x05\x05\x05\a\b\a\a\a\a\a\a\b\b\b\b\b\b\b\b\n\n\n\n\n\n\v\v\v\v\v\r\r\r\r\r\r\r\r\r\r\xFF\xDB\x00C\x01\x02\x02\x02\x03\x03\x03\x06\x03\x03\x06\r\t\a\t\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\xFF\xDD\x00\x04\x00\r\xFF\xDA\x00\f\x03\x01\x00\x02\x11\x03\x11\x00?\x00\xFC\r\xD4\xF5=CY\xD4.umZ\xE6[\xBB\xDB\xB9Zi\xE7\x99\x8B\xC9$\x8Er\xCC\xCCy$\x9A\xA3E\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x01{L\xD4\xF5\r\eP\xB6\xD5\xB4\x9B\x99m/m%Y\xA0\x9E\x16)$r!\xCA\xB2\xB0\xE4\x10k\xD3\xBF\xE1}\xFCi\xFF\x00\xA1\xD7[\xFF\x00\xC0\xC9?\xC6\xBC\x8E\x8A\x00\xFF\xD0\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD1\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD2\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD3\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD4\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD5\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD6\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD7\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD0\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD1\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD2\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD3\xFC\r\xD4\xF4\xCDCF\xD4.t\x9DZ\xDA[K\xDBIZ\x19\xE0\x99JI\x1C\x88p\xCA\xCAy\x04\x1A\xA3^\xB9\xF1\xEF\xFEKO\x8D\x7F\xEC7y\xFF\x00\xA3\ry\x1D\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00^\xD34\xCDCY\xD4-\xB4\x9D&\xDA[\xBB\xDB\xB9V\x18 \x85K\xC9$\x8Ep\xAA\xAA9$\x9A\xF4\xEF\xF8P\x9F\x1A\x7F\xE8J\xD6\xFF\x00\xF0\x0EO\xF0\xA3\xE0'\xFC\x96\x9F\x05\x7F\xD8n\xCF\xFF\x00F\n\xFD\xE8\xA0\x0F\xFF\xD9\nTPE1\x00\x00\x00\t\x00\x00\x03Iggy PopTIT2\x00\x00\x00\v\x00\x00\x03China GirlTALB\x00\x00\x00\n\x00\x00\x03The IdiotTPE2\x00\x00\x00\t\x00\x00\x03Iggy PopTCON\x00\x00\x00\r\x00\x00\x03Custom GenreCOMM\x00\x00\x00\x13\x00\x00\x03ENG\x00Iggy Pop RocksTDRC\x00\x00\x00\x05\x00\x00\x031977TCOM\x00\x00\x00\t\x00\x00\x03Iggy PopTRCK\x00\x00\x00\x02\x00\x00\x035TPOS\x00\x00\x00\x02\x00\x00\x031\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00".b)
    tag = WahWah::ID3::V2.new(content)
    image = tag.images.first

    assert_equal content.size, tag.size
    assert_equal 'China Girl', tag.title
    assert_equal 'Iggy Pop', tag.artist
    assert_equal 'Iggy Pop', tag.albumartist
    assert_equal 'Iggy Pop', tag.composer
    assert_equal 'The Idiot', tag.album
    assert_equal '1977', tag.year
    assert_equal 'Custom Genre', tag.genre
    assert_equal 5, tag.track
    assert_equal 1, tag.disc
    assert_equal 'image/jpeg', image[:mime_type]
    assert_equal :cover_front, image[:type]
    assert_equal binary_data('test/files/cover.jpeg'), image[:data].strip
    assert_nil tag.track_total
    assert_nil tag.disc_total
    assert !tag.has_extended_header?
    assert_equal 'v2.4', tag.version
  end

  def test_with_track_total_and_disc_total
    content = StringIO.new("ID3\x04\x00\x00\x00\x00*^APIC\x00\x00!/\x00\x00\x01image/jpeg\x00\x03\xFF\xFE\x00\x00\xFF\xD8\xFF\xE0\x00\x10JFIF\x00\x01\x01\x00\x00H\x00H\x00\x00\xFF\xE1\x00\xCAExif\x00\x00MM\x00*\x00\x00\x00\b\x00\a\x01\x12\x00\x03\x00\x00\x00\x01\x00\x01\x00\x00\x01\x1A\x00\x05\x00\x00\x00\x01\x00\x00\x00b\x01\e\x00\x05\x00\x00\x00\x01\x00\x00\x00j\x01(\x00\x03\x00\x00\x00\x01\x00\x02\x00\x00\x011\x00\x02\x00\x00\x00\x11\x00\x00\x00r\x012\x00\x02\x00\x00\x00\x14\x00\x00\x00\x84\x87i\x00\x04\x00\x00\x00\x01\x00\x00\x00\x98\x00\x00\x00\x00\x00\x00\x00H\x00\x00\x00\x01\x00\x00\x00H\x00\x00\x00\x01Pixelmator 3.8.4\x00\x002019:06:10 16:06:29\x00\x00\x03\xA0\x01\x00\x03\x00\x00\x00\x01\x00\x01\x00\x00\xA0\x02\x00\x04\x00\x00\x00\x01\x00\x00\x00\xC8\xA0\x03\x00\x04\x00\x00\x00\x01\x00\x00\x00\xC8\x00\x00\x00\x00\xFF\xE1\t\x92http://ns.adobe.com/xap/1.0/\x00<?xpacket begin=\"\xEF\xBB\xBF\" id=\"W5M0MpCehiHzreSzNTczkc9d\"?> <x:xmpmeta xmlns:x=\"adobe:ns:meta/\" x:xmptk=\"XMP Core 5.4.0\"> <rdf:RDF xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"> <rdf:Description rdf:about=\"\" xmlns:xmp=\"http://ns.adobe.com/xap/1.0/\" xmp:CreatorTool=\"Pixelmator 3.8.4\" xmp:ModifyDate=\"2019-06-10T16:06:29\"/> </rdf:RDF> </x:xmpmeta>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <?xpacket end=\"w\"?>\x00\xFF\xED\x008Photoshop 3.0\x008BIM\x04\x04\x00\x00\x00\x00\x00\x008BIM\x04%\x00\x00\x00\x00\x00\x10\xD4\x1D\x8C\xD9\x8F\x00\xB2\x04\xE9\x80\t\x98\xEC\xF8B~\xFF\xC0\x00\x11\b\x00\xC8\x00\xC8\x03\x01\"\x00\x02\x11\x01\x03\x11\x01\xFF\xC4\x00\x1F\x00\x00\x01\x05\x01\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x03\x04\x05\x06\a\b\t\n\v\xFF\xC4\x00\xB5\x10\x00\x02\x01\x03\x03\x02\x04\x03\x05\x05\x04\x04\x00\x00\x01}\x01\x02\x03\x00\x04\x11\x05\x12!1A\x06\x13Qa\a\"q\x142\x81\x91\xA1\b#B\xB1\xC1\x15R\xD1\xF0$3br\x82\t\n\x16\x17\x18\x19\x1A%&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\x83\x84\x85\x86\x87\x88\x89\x8A\x92\x93\x94\x95\x96\x97\x98\x99\x9A\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xB2\xB3\xB4\xB5\xB6\xB7\xB8\xB9\xBA\xC2\xC3\xC4\xC5\xC6\xC7\xC8\xC9\xCA\xD2\xD3\xD4\xD5\xD6\xD7\xD8\xD9\xDA\xE1\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xF1\xF2\xF3\xF4\xF5\xF6\xF7\xF8\xF9\xFA\xFF\xC4\x00\x1F\x01\x00\x03\x01\x01\x01\x01\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x01\x02\x03\x04\x05\x06\a\b\t\n\v\xFF\xC4\x00\xB5\x11\x00\x02\x01\x02\x04\x04\x03\x04\a\x05\x04\x04\x00\x01\x02w\x00\x01\x02\x03\x11\x04\x05!1\x06\x12AQ\aaq\x13\"2\x81\b\x14B\x91\xA1\xB1\xC1\t#3R\xF0\x15br\xD1\n\x16$4\xE1%\xF1\x17\x18\x19\x1A&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\x82\x83\x84\x85\x86\x87\x88\x89\x8A\x92\x93\x94\x95\x96\x97\x98\x99\x9A\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xB2\xB3\xB4\xB5\xB6\xB7\xB8\xB9\xBA\xC2\xC3\xC4\xC5\xC6\xC7\xC8\xC9\xCA\xD2\xD3\xD4\xD5\xD6\xD7\xD8\xD9\xDA\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xF2\xF3\xF4\xF5\xF6\xF7\xF8\xF9\xFA\xFF\xDB\x00C\x00\x02\x02\x02\x02\x02\x02\x03\x02\x02\x03\x04\x03\x03\x03\x04\x05\x04\x04\x04\x04\x05\a\x05\x05\x05\x05\x05\a\b\a\a\a\a\a\a\b\b\b\b\b\b\b\b\n\n\n\n\n\n\v\v\v\v\v\r\r\r\r\r\r\r\r\r\r\xFF\xDB\x00C\x01\x02\x02\x02\x03\x03\x03\x06\x03\x03\x06\r\t\a\t\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\xFF\xDD\x00\x04\x00\r\xFF\xDA\x00\f\x03\x01\x00\x02\x11\x03\x11\x00?\x00\xFC\r\xD4\xF5=CY\xD4.umZ\xE6[\xBB\xDB\xB9Zi\xE7\x99\x8B\xC9$\x8Er\xCC\xCCy$\x9A\xA3E\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x00QE\x14\x01{L\xD4\xF5\r\eP\xB6\xD5\xB4\x9B\x99m/m%Y\xA0\x9E\x16)$r!\xCA\xB2\xB0\xE4\x10k\xD3\xBF\xE1}\xFCi\xFF\x00\xA1\xD7[\xFF\x00\xC0\xC9?\xC6\xBC\x8E\x8A\x00\xFF\xD0\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD1\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD2\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD3\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD4\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD5\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD6\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD7\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD0\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD1\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD2\xFE\x7F\xE8\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00(\xA2\x8A\x00\xFF\xD3\xFC\r\xD4\xF4\xCDCF\xD4.t\x9DZ\xDA[K\xDBIZ\x19\xE0\x99JI\x1C\x88p\xCA\xCAy\x04\x1A\xA3^\xB9\xF1\xEF\xFEKO\x8D\x7F\xEC7y\xFF\x00\xA3\ry\x1D\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00\x14QE\x00^\xD34\xCDCY\xD4-\xB4\x9D&\xDA[\xBB\xDB\xB9V\x18 \x85K\xC9$\x8Ep\xAA\xAA9$\x9A\xF4\xEF\xF8P\x9F\x1A\x7F\xE8J\xD6\xFF\x00\xF0\x0EO\xF0\xA3\xE0'\xFC\x96\x9F\x05\x7F\xD8n\xCF\xFF\x00F\n\xFD\xE8\xA0\x0F\xFF\xD9\nTPE1\x00\x00\x00\x13\x00\x00\x01\xFF\xFEI\x00g\x00g\x00y\x00 \x00P\x00o\x00p\x00TIT2\x00\x00\x00\x17\x00\x00\x01\xFF\xFEC\x00h\x00i\x00n\x00a\x00 \x00G\x00i\x00r\x00l\x00TALB\x00\x00\x00\x15\x00\x00\x01\xFF\xFET\x00h\x00e\x00 \x00I\x00d\x00i\x00o\x00t\x00TPE2\x00\x00\x00\x13\x00\x00\x01\xFF\xFEI\x00g\x00g\x00y\x00 \x00P\x00o\x00p\x00TRCK\x00\x00\x00\t\x00\x00\x01\xFF\xFE5\x00/\x008\x00TPOS\x00\x00\x00\t\x00\x00\x01\xFF\xFE1\x00/\x001\x00TCON\x00\x00\x00\e\x00\x00\x01\xFF\xFEC\x00u\x00s\x00t\x00o\x00m\x00 \x00G\x00e\x00n\x00r\x00e\x00COMM\x00\x00\x00&\x00\x00\x01ENG\xFF\xFE\x00\x00\xFF\xFEI\x00g\x00g\x00y\x00 \x00P\x00o\x00p\x00 \x00R\x00o\x00c\x00k\x00s\x00TDRC\x00\x00\x00\v\x00\x00\x01\xFF\xFE1\x009\x007\x007\x00TCOM\x00\x00\x00\x13\x00\x00\x01\xFF\xFEI\x00g\x00g\x00y\x00 \x00P\x00o\x00p\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00".b)
    tag = WahWah::ID3::V2.new(content)
    image = tag.images.first

    assert_equal content.size, tag.size
    assert_equal 'China Girl', tag.title
    assert_equal 'Iggy Pop', tag.artist
    assert_equal 'Iggy Pop', tag.albumartist
    assert_equal 'Iggy Pop', tag.composer
    assert_equal 'The Idiot', tag.album
    assert_equal '1977', tag.year
    assert_equal 'Custom Genre', tag.genre
    assert_equal 5, tag.track
    assert_equal 1, tag.disc
    assert_equal 8, tag.track_total
    assert_equal 1, tag.disc_total
    assert_equal 'image/jpeg', image[:mime_type]
    assert_equal :cover_front, image[:type]
    assert_equal binary_data('test/files/cover.jpeg'), image[:data].strip
    assert !tag.has_extended_header?
    assert_equal 'v2.4', tag.version
  end

  def test_invalid_tag
    content = StringIO.new("id3TPE1\x00\x00\x00\x13\x00\x00\x01\xFF\xFEI\x00g\x00g\x00y\x00 \x00P\x00o\x00p\x00TIT2\x00\x00\x00\x17\x00\x00\x01\xFF\xFEC\x00h\x00i\x00n\x00a\x00 \x00G\x00i\x00r\x00l\x00TALB\x00\x00\x00\x15\x00\x00\x01\xFF\xFET\x00h\x00e\x00 \x00I\x00d\x00i\x00o\x00t\x00TPE2\x00\x00\x00\x13\x00\x00\x01\xFF\xFEI\x00g\x00g\x00y\x00 \x00P\x00o\x00p\x00TRCK\x00\x00\x00\t\x00\x00\x01\xFF\xFE5\x00/\x008\x00TPOS".b)
    tag = WahWah::ID3::V2.new(content)

    assert !tag.valid?
  end

  def test_extended_header_tag
    content = StringIO.new("ID3\x04\x00@\x00\x00\b\x10\x00\x00\x00\f\x01 \x05\x065uMxTIT2\x00\x00\x00\n\x00\x01\x00\x00\x00\x06\x03title\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00".b)

    tag = WahWah::ID3::V2.new(content)

    assert_equal content.size, tag.size
    assert_equal 'title', tag.title
    assert_equal 'v2.4', tag.version
    assert tag.has_extended_header?
  end
end
